# PE Agent Service Environment Configuration
# Copy this file to .env and customize for your environment

# ============================================================================
# RAG Pipeline Configuration
# ============================================================================

# Preprocessing
RAG_PREPROCESS_METHOD=standard
RAG_PREPROCESS_VERSION=v1

# Embedding
RAG_EMBEDDING_METHOD=bge_base
RAG_EMBEDDING_VERSION=v1

# Retrieval preset (see backend/config/presets/ for available presets)
RAG_RETRIEVAL_PRESET=hybrid_rrf_v1

# RAGFlow Integration
RAG_RAGFLOW_ENABLED=true
RAG_RAGFLOW_BASE_URL=http://ragflow:9380
RAG_RAGFLOW_API_KEY=your-api-key-here
RAG_RAGFLOW_AGENT_ID=your-agent-id-here

# ============================================================================
# vLLM Configuration
# ============================================================================

VLLM_BASE_URL=http://vllm:8000
VLLM_MODEL_NAME=gpt-oss-20b
VLLM_TEMPERATURE=0.7
VLLM_MAX_TOKENS=2048
VLLM_TIMEOUT=60

# vLLM Server Settings (for Docker container)
VLLM_PORT=8000
VLLM_GPU_COUNT=all
VLLM_SHM_SIZE=8g

# ============================================================================
# TEI (Text Embeddings Inference) Configuration
# ============================================================================

TEI_ENDPOINT_URL=http://tei:80
TEI_TIMEOUT=30

# TEI Server Settings (for Docker container)
TEI_PORT=8080
TEI_MODEL_ID=intfloat/multilingual-e5-large
TEI_MAX_CONCURRENT=512
TEI_VERSION=cpu-1.8
TEI_LOG_LEVEL=info

# ============================================================================
# FastAPI Configuration
# ============================================================================

API_TITLE=PE Agent API
API_VERSION=0.1.0
API_HOST=0.0.0.0
API_PORT=8100
API_LOG_LEVEL=info
API_RELOAD=false

# FastAPI Application Settings
FASTAPI_APP=backend.api.main:app
FASTAPI_PORT=8100
FASTAPI_WORKERS=2
FASTAPI_LOG_LEVEL=info

# ============================================================================
# RAGFlow Server Configuration
# ============================================================================

RAGFLOW_PORT=9380
RAGFLOW_IMAGE=infiniflow/ragflow:latest-full
RAGFLOW_DB_URL=sqlite:////data/ragflow.db

# Performance tuning
MAX_CONCURRENT_CHUNK_BUILDERS=12
MAX_CONCURRENT_TASKS=12
EMBEDDING_BATCH_SIZE=64

# ============================================================================
# Frontend Configuration
# ============================================================================

PE_AGENT_UI_PORT=3000
NODE_ENV=production

# ============================================================================
# Docker & Registry Configuration
# ============================================================================

REGISTRY_NAMESPACE=local
IMAGE_TAG=latest

# ============================================================================
# HuggingFace Configuration
# ============================================================================

HUGGINGFACE_HUB_TOKEN=your-hf-token-here

# ============================================================================
# CUDA Configuration
# ============================================================================

CUDA_VISIBLE_DEVICES=0,1,2,3
